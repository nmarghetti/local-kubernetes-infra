# Automatically generated by ./scripts/flux_setup_tenants.sh
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - rbac.yaml
  - role.yaml
patches:
  # You need to give access to the tenant for each of its namespace
  - target:
      kind: RoleBinding
      name: team-foo-reconciler
      namespace: foo-infra
    patch: |-
      - op: add
        path: /subjects/-
        value:
          kind: ServiceAccount
          name: team-foo
          namespace: foo
  - target:
      kind: RoleBinding
      name: team-foo-reconciler
      namespace: foo-app
    patch: |-
      - op: add
        path: /subjects/-
        value:
          kind: ServiceAccount
          name: team-foo
          namespace: foo
  - target:
      kind: RoleBinding
      name: team-foo-reconciler
      namespace: foo-kind
    patch: |-
      - op: add
        path: /subjects/-
        value:
          kind: ServiceAccount
          name: team-foo
          namespace: foo
